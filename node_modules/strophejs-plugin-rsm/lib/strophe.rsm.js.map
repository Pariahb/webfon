{"version":3,"file":"strophe.rsm.js","sources":["../src/strophe.rsm.js"],"sourcesContent":["import { $build, Strophe } from 'strophe.js';\n\nStrophe.addNamespace('RSM', 'http://jabber.org/protocol/rsm');\n\nStrophe.RSM = function(options) {\n  this.attribs = ['max', 'first', 'last', 'after', 'before', 'index', 'count'];\n\n  if (typeof options.xml != 'undefined') {\n    this.fromXMLElement(options.xml);\n  } else {\n    for (var ii = 0; ii < this.attribs.length; ii++) {\n      var attrib = this.attribs[ii];\n      this[attrib] = options[attrib];\n    }\n  }\n};\n\nStrophe.RSM.prototype = {\n  toXML: function() {\n    var xml = $build('set', {xmlns: Strophe.NS.RSM});\n    for (var ii = 0; ii < this.attribs.length; ii++) {\n      var attrib = this.attribs[ii];\n      if (typeof this[attrib] != 'undefined') {\n        xml = xml.c(attrib).t(this[attrib].toString()).up();\n      }\n    }\n    return xml.tree();\n  },\n\n  next: function(max) {\n    var newSet = new Strophe.RSM({max: max, after: this.last});\n    return newSet;\n  },\n\n  previous: function(max) {\n    var newSet = new Strophe.RSM({max: max, before: this.first});\n    return newSet;\n  },\n\n  fromXMLElement: function(xmlElement) {\n    for (var ii = 0; ii < this.attribs.length; ii++) {\n      var attrib = this.attribs[ii];\n      var elem = xmlElement.getElementsByTagName(attrib)[0];\n      if (typeof elem != 'undefined' && elem !== null) {\n        this[attrib] = Strophe.getText(elem);\n        if (attrib == 'first') {\n          this.index = elem.getAttribute('index');\n        }\n      }\n    }\n  }\n};\n"],"names":["Strophe","$build"],"mappings":";;;;;;AAEAA,kBAAO,CAAC,YAAY,CAAC,KAAK,EAAE,gCAAgC,CAAC,CAAC;;AAE9DA,kBAAO,CAAC,GAAG,GAAG,SAAS,OAAO,EAAE;EAC9B,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;;EAE7E,IAAI,OAAO,OAAO,CAAC,GAAG,IAAI,WAAW,EAAE;IACrC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;GAClC,MAAM;IACL,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;MAC/C,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;MAC9B,IAAI,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;KAChC;GACF;CACF,CAAC;;AAEFA,kBAAO,CAAC,GAAG,CAAC,SAAS,GAAG;EACtB,KAAK,EAAE,WAAW;IAChB,IAAI,GAAG,GAAGC,iBAAM,CAAC,KAAK,EAAE,CAAC,KAAK,EAAED,kBAAO,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IACjD,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;MAC/C,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;MAC9B,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,WAAW,EAAE;QACtC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;OACrD;KACF;IACD,OAAO,GAAG,CAAC,IAAI,EAAE,CAAC;GACnB;;EAED,IAAI,EAAE,SAAS,GAAG,EAAE;IAClB,IAAI,MAAM,GAAG,IAAIA,kBAAO,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC3D,OAAO,MAAM,CAAC;GACf;;EAED,QAAQ,EAAE,SAAS,GAAG,EAAE;IACtB,IAAI,MAAM,GAAG,IAAIA,kBAAO,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IAC7D,OAAO,MAAM,CAAC;GACf;;EAED,cAAc,EAAE,SAAS,UAAU,EAAE;IACnC,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;MAC/C,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;MAC9B,IAAI,IAAI,GAAG,UAAU,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;MACtD,IAAI,OAAO,IAAI,IAAI,WAAW,IAAI,IAAI,KAAK,IAAI,EAAE;QAC/C,IAAI,CAAC,MAAM,CAAC,GAAGA,kBAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACrC,IAAI,MAAM,IAAI,OAAO,EAAE;UACrB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;SACzC;OACF;KACF;GACF;CACF,CAAC;;;;"}
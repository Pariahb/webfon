{"ast":null,"code":"import _slicedToArray from \"/home/paria/sandbox/projects/webfon-V2/webfonv2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/paria/sandbox/projects/webfon-V2/webfonv2/src/components/chat/main-page/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport LoginPage from \"../login-page\";\nimport TabsSection from \"../tabs\";\nimport StatusDetector from \"../status-detector\";\nimport { useSelector } from \"react-redux\";\nimport DropDownMenu from \"../drop-down-menu\";\nimport KazooLogin from \"../../call/login\";\nimport \"./style.css\";\nimport ChangePassword from \"../../call/change-password-form\";\nimport LeftNav from \"../tabs/left-nav\";\n\nconst MainPage = () => {\n  const showChangePassPage = useSelector(state => state.showChangePasswordPage);\n  const showMainPage = useSelector(state => state.showMainPage);\n  const showCallPage = useSelector(state => state.showCallPage);\n  const connection = useSelector(state => state.connection);\n\n  const _useState = useState(showMainPage),\n        _useState2 = _slicedToArray(_useState, 2),\n        showPage = _useState2[0],\n        setShowPage = _useState2[1];\n  /*-----------------Log Out Button action----------------=*/\n\n\n  const handleDisconnect = () => {\n    connection.disconnect();\n  };\n  /*-----------------/Log Out Button action----------------*/\n\n\n  useEffect(() => {\n    setShowPage(showMainPage);\n  }, [showMainPage]);\n  useEffect(() => {\n    setShowPage(showCallPage);\n  }, [showCallPage]);\n  /*----------response to subscription request-----------*/\n  // const onSubscriptionRequest = (stanza) => {\n  //     this.setState({\n  //         showPopUp: true\n  //     })\n  //     if (stanza.getAttribute(\"type\") === \"subscribe\") {\n  //         // Send a 'subscribed' notification back to accept the incoming\n  //         // subscription request\n  //         connection.send($pres({to: stanza.getAttribute(\"from\"), type: \"subscribed\"}));\n  //     }\n  //     return true;\n  // }\n\n  /*----------/response to subscription request-----------*/\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, showPage ? React.createElement(\"div\", {\n    className: \"col-sm-12 main-page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(LeftNav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })) : showChangePassPage ? React.createElement(ChangePassword, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }) : React.createElement(KazooLogin, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })));\n};\n\nexport default MainPage;","map":{"version":3,"sources":["/home/paria/sandbox/projects/webfon-V2/webfonv2/src/components/chat/main-page/index.js"],"names":["React","useEffect","useState","LoginPage","TabsSection","StatusDetector","useSelector","DropDownMenu","KazooLogin","ChangePassword","LeftNav","MainPage","showChangePassPage","state","showChangePasswordPage","showMainPage","showCallPage","connection","showPage","setShowPage","handleDisconnect","disconnect"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,SAAP,MAAsB,eAAtB;AACA,OAAOC,WAAP,MAAwB,SAAxB;AACA,OAAOC,cAAP,MAA2B,oBAA3B;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAO,aAAP;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,OAAOC,OAAP,MAAoB,kBAApB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AACnB,QAAMC,kBAAkB,GAAGN,WAAW,CAACO,KAAK,IAAIA,KAAK,CAACC,sBAAhB,CAAtC;AACA,QAAMC,YAAY,GAAGT,WAAW,CAACO,KAAK,IAAIA,KAAK,CAACE,YAAhB,CAAhC;AACA,QAAMC,YAAY,GAAGV,WAAW,CAACO,KAAK,IAAIA,KAAK,CAACG,YAAhB,CAAhC;AACA,QAAMC,UAAU,GAAGX,WAAW,CAACO,KAAK,IAAIA,KAAK,CAACI,UAAhB,CAA9B;;AAJmB,oBAKaf,QAAQ,CAACa,YAAD,CALrB;AAAA;AAAA,QAKZG,QALY;AAAA,QAKFC,WALE;AAQnB;;;AACA,QAAMC,gBAAgB,GAAG,MAAM;AAC3BH,IAAAA,UAAU,CAACI,UAAX;AACH,GAFD;AAIA;;;AAEApB,EAAAA,SAAS,CAAC,MAAM;AACZkB,IAAAA,WAAW,CAACJ,YAAD,CAAX;AACH,GAFQ,EAEN,CAACA,YAAD,CAFM,CAAT;AAKAd,EAAAA,SAAS,CAAC,MAAM;AACZkB,IAAAA,WAAW,CAACH,YAAD,CAAX;AACH,GAFQ,EAEN,CAACA,YAAD,CAFM,CAAT;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA,SACI,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKE,QAAQ,GAAG;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAcJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdI,CAAH,GAgBLN,kBAAkB,GAAG,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAuB,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBjD,CADJ,CADJ;AA0BH,CAnED;;AAsEA,eAAeD,QAAf","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport LoginPage from \"../login-page\";\nimport TabsSection from \"../tabs\";\nimport StatusDetector from \"../status-detector\";\nimport {useSelector} from \"react-redux\";\nimport DropDownMenu from \"../drop-down-menu\";\nimport KazooLogin from \"../../call/login\";\nimport \"./style.css\"\nimport ChangePassword from \"../../call/change-password-form\";\nimport LeftNav from \"../tabs/left-nav\";\n\nconst MainPage = () => {\n    const showChangePassPage = useSelector(state => state.showChangePasswordPage);\n    const showMainPage = useSelector(state => state.showMainPage);\n    const showCallPage = useSelector(state => state.showCallPage);\n    const connection = useSelector(state => state.connection);\n    const [showPage, setShowPage] = useState(showMainPage);\n\n\n    /*-----------------Log Out Button action----------------=*/\n    const handleDisconnect = () => {\n        connection.disconnect();\n    };\n\n    /*-----------------/Log Out Button action----------------*/\n\n    useEffect(() => {\n        setShowPage(showMainPage)\n    }, [showMainPage]);\n\n\n    useEffect(() => {\n        setShowPage(showCallPage);\n    }, [showCallPage]);\n\n\n    /*----------response to subscription request-----------*/\n    // const onSubscriptionRequest = (stanza) => {\n    //     this.setState({\n    //         showPopUp: true\n    //     })\n    //     if (stanza.getAttribute(\"type\") === \"subscribe\") {\n    //         // Send a 'subscribed' notification back to accept the incoming\n    //         // subscription request\n    //         connection.send($pres({to: stanza.getAttribute(\"from\"), type: \"subscribed\"}));\n    //     }\n    //     return true;\n    // }\n\n    /*----------/response to subscription request-----------*/\n\n\n    return (\n        <React.Fragment>\n            <div className=\"container\">\n                {showPage ? <div className=\"col-sm-12 main-page\">\n                        {/*<button*/}\n                        {/*    type=\"button\"*/}\n                        {/*    value=\"logout\"*/}\n                        {/*    className=\"btn-sm btn-danger logout\"*/}\n                        {/*    id=\"logout\"*/}\n                        {/*    onClick={handleDisconnect}*/}\n                        {/*>Log out*/}\n                        {/*</button>*/}\n                        {/*<div className=\"mystatus\">*/}\n                        {/*    <DropDownMenu/>*/}\n                        {/*    <StatusDetector/>*/}\n                        {/*</div>*/}\n                        {/*<TabsSection/>*/}\n                        <LeftNav/>\n                    </div> :\n                    showChangePassPage ? <ChangePassword/> : <KazooLogin/>\n                }\n\n            </div>\n        </React.Fragment>\n    );\n\n}\n\n\nexport default MainPage;\n"]},"metadata":{},"sourceType":"module"}
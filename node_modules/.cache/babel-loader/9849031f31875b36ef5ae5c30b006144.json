{"ast":null,"code":"import _defineProperty from \"/home/paria/sandbox/projects/webfon-V2/webfonv2/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/paria/sandbox/projects/webfon-V2/webfonv2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/paria/sandbox/projects/webfon-V2/webfonv2/src/components/call/call-log/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport { getCookie } from \"../../helper/functions\";\n\nconst CallLogs = () => {\n  const cdrsData = useSelector(state => state.cdrsData);\n\n  const moment = require('persian-date');\n\n  const orgMoment = require('moment');\n\n  const jalali = require('moment-jalaali');\n\n  const _useState = useState({\n    item: []\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        cdrData = _useState2[0],\n        getCdrData = _useState2[1];\n\n  const dispatch = useDispatch();\n  let today = orgMoment();\n  console.log('today', today.startOf('day').unix());\n\n  const todayCalls = () => {\n    axios.get(\"http://77.104.116.187:8000/v2/accounts/\" + getCookie(\"accID\") + \"/users/\" + getCookie(\"owID\") + \"/cdrs/interaction?created_from=\" + today.startOf('day').unix() + \"&created_to=\" + today.endOf('day').unix() + \"&page_size=10\" + \"&_=\" + new Date().setUTCSeconds(-60), {\n      headers: {\n        \"X-Auth-Token\": getCookie(\"monster_token\")\n      }\n    }).then(response => {\n      let cdrs = cdrData.item;\n      cdrs.push(response.data);\n      getCdrData(_objectSpread({}, cdrData, {\n        item: cdrs\n      }));\n      setCdrsDataToReducer(cdrData.item[0].data);\n      console.log(\"response.cdrs\", cdrData.item[0].data);\n    }).catch(error => {});\n  };\n  /*------set CDRs per user data to reducer-----------------*/\n\n\n  const setCdrsDataToReducer = cdrsData => {\n    dispatch({\n      cdrsData,\n      type: 'GET_CDRS_DATA'\n    });\n  };\n  /*------set CDRs per user data to reducer-----------------*/\n\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn-sm badge-light \",\n    onClick: todayCalls,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"Today\"), React.createElement(\"button\", {\n    className: \"btn-sm badge-light\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"This Week\"), React.createElement(\"button\", {\n    className: \"btn-sm badge-light\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"This Month\"), React.createElement(\"table\", {\n    className: \"table table-sm table-striped table-bordered table-hover\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Date/Time\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"From\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"To\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Duration\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, cdrsData === undefined ? null : cdrsData.map((item, i) => {\n    return React.createElement(\"tr\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, jalali.unix(item.unix_timestamp).format('jYYYY/jM/jD, HH:mm:ss')), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, item.from), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, item.to), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, item.duration_seconds));\n  }))));\n};\n\nexport default CallLogs;","map":{"version":3,"sources":["/home/paria/sandbox/projects/webfon-V2/webfonv2/src/components/call/call-log/index.js"],"names":["React","useState","useDispatch","useSelector","axios","getCookie","CallLogs","cdrsData","state","moment","require","orgMoment","jalali","item","cdrData","getCdrData","dispatch","today","console","log","startOf","unix","todayCalls","get","endOf","Date","setUTCSeconds","headers","then","response","cdrs","push","data","setCdrsDataToReducer","catch","error","type","undefined","map","i","unix_timestamp","format","from","to","duration_seconds"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport axios from \"axios\";\nimport {getCookie} from \"../../helper/functions\";\n\nconst CallLogs = () => {\n    const cdrsData = useSelector(state => state.cdrsData);\n    const moment = require('persian-date');\n    const orgMoment = require('moment');\n    const jalali = require('moment-jalaali');\n    const [cdrData, getCdrData] = useState({item: []});\n    const dispatch = useDispatch();\n    let today = orgMoment();\n    console.log('today', today.startOf('day').unix());\n    const todayCalls = () => {\n        axios.get(\"http://77.104.116.187:8000/v2/accounts/\" + getCookie(\"accID\")  + \"/users/\" + getCookie(\"owID\") + \"/cdrs/interaction?created_from=\" + today.startOf('day').unix()\n            + \"&created_to=\" + today.endOf('day').unix()\n            + \"&page_size=10\" + \"&_=\" + new Date().setUTCSeconds(-60) , {\n            headers: {\n                \"X-Auth-Token\": getCookie(\"monster_token\")\n            }\n        })\n            .then(response => {\n                let cdrs = cdrData.item;\n                cdrs.push(response.data)\n                getCdrData({...cdrData, item: cdrs});\n                setCdrsDataToReducer(cdrData.item[0].data);\n                console.log(\"response.cdrs\", cdrData.item[0].data);\n            })\n            .catch(error => {\n\n            });\n    };\n    /*------set CDRs per user data to reducer-----------------*/\n    const setCdrsDataToReducer = (cdrsData) => {\n        dispatch({cdrsData, type: 'GET_CDRS_DATA'})\n    };\n    /*------set CDRs per user data to reducer-----------------*/\n    return (\n        <React.Fragment>\n            <button className=\"btn-sm badge-light \" onClick={todayCalls}>Today</button>\n            <button className=\"btn-sm badge-light\">This Week</button>\n            <button className=\"btn-sm badge-light\">This Month</button>\n            <table className=\"table table-sm table-striped table-bordered table-hover\">\n                <thead>\n                <tr>\n                    <th>Date/Time</th>\n                    <th>From</th>\n                    <th>To</th>\n                    <th>Duration</th>\n                </tr>\n                </thead>\n                <tbody>{\n\n                    cdrsData === undefined ? null : cdrsData.map((item, i) => {\n\n                        return (\n                            <tr key={i}>\n\n                                <td>\n\n                                    {\n                                        jalali.unix(item.unix_timestamp).format('jYYYY/jM/jD, HH:mm:ss')\n                                    }\n\n                                </td>\n                                <td>\n                                    {item.from}\n                                </td>\n                                <td>\n                                    {item.to}\n                                </td>\n                                <td>\n                                    {item.duration_seconds}\n                                </td>\n                            </tr>\n                        )\n\n                    })\n                }\n                </tbody>\n            </table>\n        </React.Fragment>\n    )\n\n};\n\n\nexport default CallLogs;\n"]},"metadata":{},"sourceType":"module"}
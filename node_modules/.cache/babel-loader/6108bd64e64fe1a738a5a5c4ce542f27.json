{"ast":null,"code":"var _jsxFileName = \"/home/paria/sandbox/projects/webfon-V2/webfonv2/src/components/call/make-call/index.js\";\nimport React from \"react\";\nimport \"./style.css\";\n\nconst MakeCall = () => {\n  if (configuration.uri && configuration.password) {\n    JsSIP.debug.enable('JsSIP:*'); // more detailed debug output\n\n    phone = new JsSIP.UA(configuration);\n    phone.on('registrationFailed', function (ev) {\n      alert('Registering on SIP server failed with error: ' + ev.cause);\n      configuration.uri = null;\n      configuration.password = null;\n      updateUI();\n    });\n    phone.on('newRTCSession', function (ev) {\n      var newSession = ev.session;\n\n      if (session) {\n        // hangup any existing call\n        session.terminate();\n      }\n\n      session = newSession;\n\n      var completeSession = function () {\n        session = null;\n        updateUI();\n      };\n\n      session.on('ended', completeSession);\n      session.on('failed', completeSession);\n      session.on('accepted', updateUI);\n      session.on('confirmed', function () {\n        var localStream = session.connection.getLocalStreams()[0];\n        var dtmfSender = session.connection.createDTMFSender(localStream.getAudioTracks()[0]);\n\n        session.sendDTMF = function (tone) {\n          dtmfSender.insertDTMF(tone);\n        };\n\n        updateUI();\n      });\n      session.on('addstream', function (e) {\n        incomingCallAudio.pause();\n        remoteAudio.src = window.URL.createObjectURL(e.stream);\n      });\n\n      if (session.direction === 'incoming') {\n        incomingCallAudio.play();\n      }\n\n      updateUI();\n    });\n    phone.start();\n  }\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"divCalling\",\n    className: \"demo-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"text\",\n    onClick: makeCall,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"register\"), React.createElement(\"div\", {\n    id: \"dialpad\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }))), React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }))), React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"7\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"9\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }))), React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"*\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"button\",\n    value: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }))))))));\n};\n\nexport default MakeCall;","map":{"version":3,"sources":["/home/paria/sandbox/projects/webfon-V2/webfonv2/src/components/call/make-call/index.js"],"names":["React","MakeCall","configuration","uri","password","JsSIP","debug","enable","phone","UA","on","ev","alert","cause","updateUI","newSession","session","terminate","completeSession","localStream","connection","getLocalStreams","dtmfSender","createDTMFSender","getAudioTracks","sendDTMF","tone","insertDTMF","e","incomingCallAudio","pause","remoteAudio","src","window","URL","createObjectURL","stream","direction","play","start","makeCall"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./style.css\"\n\n\nconst MakeCall = () => {\n\n    if(configuration.uri && configuration.password){\n        JsSIP.debug.enable('JsSIP:*'); // more detailed debug output\n        phone = new JsSIP.UA(configuration);\n        phone.on('registrationFailed', function(ev){\n            alert('Registering on SIP server failed with error: ' + ev.cause);\n            configuration.uri = null;\n            configuration.password = null;\n            updateUI();\n        });\n        phone.on('newRTCSession',function(ev){\n            var newSession = ev.session;\n            if(session){ // hangup any existing call\n                session.terminate();\n            }\n            session = newSession;\n            var completeSession = function(){\n                session = null;\n                updateUI();\n            };\n            session.on('ended', completeSession);\n            session.on('failed', completeSession);\n            session.on('accepted',updateUI);\n            session.on('confirmed',function(){\n                var localStream = session.connection.getLocalStreams()[0];\n                var dtmfSender = session.connection.createDTMFSender(localStream.getAudioTracks()[0])\n                session.sendDTMF = function(tone){\n                    dtmfSender.insertDTMF(tone);\n                };\n                updateUI();\n            });\n            session.on('addstream', function(e){\n                incomingCallAudio.pause();\n                remoteAudio.src = window.URL.createObjectURL(e.stream);\n            });\n            if(session.direction === 'incoming'){\n                incomingCallAudio.play();\n            }\n            updateUI();\n        });\n        phone.start();\n    }\n    return (\n\n        <React.Fragment>\n            <div id=\"divCalling\" className=\"demo-block\">\n                <button type=\"text\" onClick={makeCall}>register</button>\n                <div id=\"dialpad\">\n                    <table>\n                        <tbody>\n                        <tr>\n                            <td><input type=\"button\" value=\"1\"/></td>\n                            <td><input type=\"button\" value=\"2\"/></td>\n                            <td><input type=\"button\" value=\"3\"/></td>\n                        </tr>\n                        <tr>\n                            <td><input type=\"button\" value=\"4\"/></td>\n                            <td><input type=\"button\" value=\"5\"/></td>\n                            <td><input type=\"button\" value=\"6\"/></td>\n                        </tr>\n                        <tr>\n                            <td><input type=\"button\" value=\"7\"/></td>\n                            <td><input type=\"button\" value=\"8\"/></td>\n                            <td><input type=\"button\" value=\"9\"/></td>\n                        </tr>\n                        <tr>\n                            <td><input type=\"button\" value=\"*\"/></td>\n                            <td><input type=\"button\" value=\"0\"/></td>\n                            <td><input type=\"button\" value=\"#\"/></td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n\n\n            </div>\n        </React.Fragment>\n    )\n};\n\nexport default MakeCall;\n"]},"metadata":{},"sourceType":"module"}
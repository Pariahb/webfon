{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(require('strophe.js')) : typeof define === 'function' && define.amd ? define(['strophe.js'], factory) : factory(global.window);\n})(this, function (strophe_js) {\n  'use strict';\n\n  strophe_js.Strophe.addNamespace('RSM', 'http://jabber.org/protocol/rsm');\n\n  strophe_js.Strophe.RSM = function (options) {\n    this.attribs = ['max', 'first', 'last', 'after', 'before', 'index', 'count'];\n\n    if (typeof options.xml != 'undefined') {\n      this.fromXMLElement(options.xml);\n    } else {\n      for (var ii = 0; ii < this.attribs.length; ii++) {\n        var attrib = this.attribs[ii];\n        this[attrib] = options[attrib];\n      }\n    }\n  };\n\n  strophe_js.Strophe.RSM.prototype = {\n    toXML: function toXML() {\n      var xml = strophe_js.$build('set', {\n        xmlns: strophe_js.Strophe.NS.RSM\n      });\n\n      for (var ii = 0; ii < this.attribs.length; ii++) {\n        var attrib = this.attribs[ii];\n\n        if (typeof this[attrib] != 'undefined') {\n          xml = xml.c(attrib).t(this[attrib].toString()).up();\n        }\n      }\n\n      return xml.tree();\n    },\n    next: function next(max) {\n      var newSet = new strophe_js.Strophe.RSM({\n        max: max,\n        after: this.last\n      });\n      return newSet;\n    },\n    previous: function previous(max) {\n      var newSet = new strophe_js.Strophe.RSM({\n        max: max,\n        before: this.first\n      });\n      return newSet;\n    },\n    fromXMLElement: function fromXMLElement(xmlElement) {\n      for (var ii = 0; ii < this.attribs.length; ii++) {\n        var attrib = this.attribs[ii];\n        var elem = xmlElement.getElementsByTagName(attrib)[0];\n\n        if (typeof elem != 'undefined' && elem !== null) {\n          this[attrib] = strophe_js.Strophe.getText(elem);\n\n          if (attrib == 'first') {\n            this.index = elem.getAttribute('index');\n          }\n        }\n      }\n    }\n  };\n});","map":null,"metadata":{},"sourceType":"script"}